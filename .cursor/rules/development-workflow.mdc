---
description: 开发流程管理 - 通过口语命令管理任务、分支和开发流程
alwaysApply: true
---

# 项目配置

```yaml
project:
  name: "kk_nl2sql_aibot"
  team: "KK"  # Linear team key
  repo: "https://github.com/your-org/kk_nl2sql_aibot"  # Github 仓库地址
```

> 💡 **使用说明**: 请根据实际项目信息修改上述配置

---

# 开发流程自然语言命令

当用户使用日常口语描述开发任务时，自动执行相应的开发流程操作。

## 命令模式识别

### 🚀 开始新功能
**触发词**: "开始做"、"开始开发"、"要做"、"新功能"

**用户说**: 
- "开始做登录系统功能"
- "要开发用户注册模块"
- "新功能：数据导出"

**自动执行**:
1. 在 Linear 中查找或创建对应任务
2. 推荐分支名称: `feature/{task-id}-{功能简述}`
3. 更新任务状态为 "In Progress"
4. 询问是否立即创建分支

**示例响应**:
```
✅ 已识别任务: 登录系统功能

📋 Linear 任务: KK-123 "用户登录系统"
🌿 推荐分支: feature/KK-123-login-system
📊 任务状态: Todo → In Progress

是否立即创建分支并切换？
```

---

### ✅ 完成功能
**触发词**: "完成了"、"做完了"、"已完成"、"开发完成"

**用户说**:
- "登录功能完成了"
- "已完成用户注册模块"

**自动执行**:
1. 检查当前分支和关联任务
2. 提醒运行测试
3. 引导代码提交和推送
4. 更新任务状态为 "Done" 或 "Ready for Review"
5. 询问是否创建 Pull Request

---

### 🐛 修复问题
**触发词**: "修复"、"解决"、"修bug"、"有个问题"

**用户说**:
- "修复登录页面的验证问题"
- "解决数据库连接超时"

**自动执行**:
1. 推荐分支名称: `fix/{task-id}-{问题简述}`
2. 在 Linear 中查找或创建 bug 任务
3. 更新任务状态为 "In Progress"

---

### 🔄 继续开发
**触发词**: "继续"、"接着做"、"继续开发"

**用户说**:
- "继续做昨天的登录功能"
- "接着开发"

**自动执行**:
1. 查询用户最近的 "In Progress" 任务
2. 检查对应的 git 分支
3. 如果不在正确分支，提示切换
4. 显示任务进度和待办事项

---

### 📝 查看任务
**触发词**: "看看"、"有什么"、"查看任务"、"我的任务"

**用户说**:
- "看看我有什么任务"
- "查看当前任务"

**自动执行**:
1. 列出用户在 Linear 中的所有活跃任务
2. 显示任务状态、优先级
3. 显示关联的 git 分支

---

## 分支命名规范

根据任务类型自动推荐分支名称:

| 类型 | 格式 | 示例 |
|------|------|------|
| 新功能 | `feature/{task-id}-{description}` | `feature/KK-123-user-login` |
| Bug修复 | `fix/{task-id}-{description}` | `fix/KK-124-validation-error` |
| 优化 | `optimize/{task-id}-{description}` | `optimize/KK-125-query-performance` |
| 文档 | `docs/{task-id}-{description}` | `docs/KK-126-api-documentation` |
| 重构 | `refactor/{task-id}-{description}` | `refactor/KK-127-auth-module` |

**命名规则**:
- 使用小写字母和连字符
- 简洁但具有描述性
- 包含 Linear 任务 ID (如 KK-123)

---

## Linear 任务状态流转

自动管理任务在以下状态间流转:

```
Todo → In Progress → In Review → Done
  ↓         ↓           ↓
Blocked  Cancelled   Cancelled
```

**状态说明**:
- `Todo`: 新建任务，尚未开始
- `In Progress`: 正在开发
- `In Review`: 代码审查中
- `Done`: 已完成
- `Blocked`: 被阻塞
- `Cancelled`: 已取消

---

## 自动化工作流程

### 开始新任务时
1. ✅ 检查 Linear 任务是否存在，不存在则创建
2. ✅ 更新任务状态为 "In Progress"
3. ✅ 分配任务给当前用户
4. ✅ 推荐符合规范的分支名称
5. ✅ 可选：自动创建并切换到新分支

### 提交代码时
1. ✅ 检查代码质量（linter）
2. ✅ 生成符合规范的 commit message
3. ✅ Commit message 格式: `[{task-id}] {type}: {description}`
   - 示例: `[KK-123] feat: add user login form`
4. ✅ 在 commit message 中自动关联 Linear 任务

### 完成任务时
1. ✅ 确认所有代码已提交并推送
2. ✅ 询问是否创建 Pull Request
3. ✅ 更新任务状态为 "In Review" (如果创建 PR) 或 "Done"
4. ✅ 在 Linear 任务中添加完成备注

---

## Commit Message 规范

格式: `[{task-id}] {type}: {description}`

**类型 (type)**:
- `feat`: 新功能
- `fix`: Bug 修复
- `docs`: 文档更新
- `style`: 代码格式调整
- `refactor`: 重构
- `perf`: 性能优化
- `test`: 测试相关
- `chore`: 构建/工具链相关

**示例**:
```
[KK-123] feat: add user login functionality
[KK-124] fix: resolve validation error on registration form
[KK-125] docs: update API documentation for auth endpoints
```

---

## 使用示例

### 场景 1: 开始新功能

**用户**: "开始做用户登录功能"

**AI 响应**:
```
✅ 明白了！准备开始开发用户登录功能

📋 正在 Linear 中查找任务...
   找到任务: KK-123 "用户登录系统实现"
   
🌿 推荐分支名称: feature/KK-123-user-login

📊 更新任务状态: Todo → In Progress
👤 分配给: 你

下一步操作:
1. 创建并切换到新分支: git checkout -b feature/KK-123-user-login
2. 开始编码

是否立即创建分支？
```

### 场景 2: 完成开发

**用户**: "登录功能做完了"

**AI 响应**:
```
🎉 太好了！登录功能开发完成

📋 当前任务: KK-123 "用户登录系统实现"
🌿 当前分支: feature/KK-123-user-login

✅ 检查清单:
- [ ] 代码已提交
- [ ] 测试已通过
- [ ] 文档已更新

准备提交代码吗？我可以帮你:
1. 生成 commit message
2. 推送到远程仓库
3. 创建 Pull Request
4. 更新 Linear 任务状态
```

---

## 注意事项

1. **任务关联**: 所有开发工作都应该关联 Linear 任务
2. **分支管理**: 每个任务使用独立分支，遵循命名规范
3. **代码审查**: 完成后创建 PR，不要直接合并到主分支
4. **状态同步**: 保持 Linear 任务状态与实际开发进度同步
5. **提交规范**: 遵循 commit message 规范，便于追溯

---

## 快速参考

| 我想... | 可以说... |
|--------|----------|
| 开始新功能 | "开始做XXX功能" |
| 修复问题 | "修复XXX问题" |
| 完成任务 | "XXX完成了" |
| 继续开发 | "继续开发" |
| 查看任务 | "我有什么任务" |
| 创建分支 | "帮我创建分支" |
| 提交代码 | "提交代码" |
| 创建PR | "创建Pull Request" |
